@model HelloDoc.DAL.ViewModels.Encountervm;


<div class="row d-flex justify-content-center">
    <div class="col-md-8 col-11">
        <div class="d-flex justify-content-between mb-3">
            <div class="mt-3">
                <h5>
                    Encounter Form  
                </h5>
            </div>

            @if(Model.CallId == 3)
            {
                <a class="btn btn-outline-info border border-2 border-info fs-5 p-2 rounded fw-semibold me-2" onclick="GetProviderDashboard()">
                    <i class="bi bi-caret-left"></i> Back
                </a>
            }
            else
            {
                <a class="btn btn-outline-info border border-2 border-info fs-5 p-2 rounded fw-semibold me-2" onclick="GetDashboard(@Model.StatusForName)">
                    <i class="bi bi-caret-left"></i> Back
                </a>
            }
        </div>
        <form method="post" id="encounterForm" class="p-4 shadow" onsubmit="UpdateEncounter()">
            <input type="text" asp-for="RequestId" id="reqid" value="@Model.RequestId" hidden/>
            <input type="text" asp-for="StatusForName" value="@Model.StatusForName"  id="statusForName" hidden/>
            <input type="text" asp-for="CallId" value="@Model.CallId"  id="callId" hidden/>

            <div class="d-flex justify-content-center ">
                <h3 class="fw-bolder text-info">
                    Medical Report-Confidential
                </h3>
            </div>
            <div class="row">

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                      
                        <input type="text" asp-for="FirstName" class="form-control" id="floatingFirstName" placeholder="First Name">
                        <label for="floatingFirstName" class="text-secondary">First Name</label>
                        <span class="text-danger" asp-validation-for="FirstName"></span>
                    </div>
                </div>
                <div class="col-xl-6 mt-4 ">
                    <div class="form-floating">
                        <input type="text" asp-for="LastName" class="form-control" id="floatingLastName" placeholder="Last Name">
                        <label for="floatingLastName" class="text-secondary">Last Name</label>
                        <span class="text-danger" asp-validation-for="LastName"></span>
                    </div>
                </div>

                <div class="col-12 mt-4 ">
                    <div class="form-floating">
                        <input type="text" asp-for="Location" class="someinput form-control" id="floatingLocation" placeholder="Location">
                        <label for="floatingLocation" class="text-secondary">Location</label>
                        <span class="text-danger" asp-validation-for="Location"></span>
                    </div>
                </div>

                <div class="col-xl-6 mt-4 ">
                    @* for birthdate *@
                    @{
                        string max = DateTime.Now.ToString("yyyy-MM-dd");
                    }
                    <div class="form-floating">
                        <input type="date" asp-for="BirthDate" max="@max" class="someinput form-control" id="BirthDate" placeholder="BirthDate">
                        <label for="BirthDate" class="text-secondary">Date of Birth</label>
                        <span class="text-danger" asp-validation-for="BirthDate"></span>
                    </div>
                </div>
                <div class="col-xl-6 mt-4 ">
                    <div class="form-floating">
                        <input type="date" asp-for="ServiceDate" class="form-control" id="FormDate" placeholder="FormDate">
                        <label for="FormDate" class="text-secondary">Date</label>
                    </div>
                </div>


                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <input id="phone" type="tel" asp-for="PhoneNumber" class="someinput form-control" placeholder="birthDate" />
                        <label for="phone" class="text-secondary">Phone Number</label>
                        <span class="text-danger" asp-validation-for="BirthDate"></span>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <input type="email" asp-for="Email" class="form-control" id="floatingEmail" placeholder="Email">
                        <label for="floatingEmail" class="text-secondary">Email</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="HistoryOfPresentIllness" class="form-control h-100 someinput" rows="2" placeholder="History" id="floatingTextareahistory"></textarea>
                        <label for="floatingTextareahistory" class="text-secondary">History of Present Illness or Injury</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="MedicalHistory" class="form-control h-100 someinput" rows="2" placeholder="Medical history" id="floatingTextareaMefical"></textarea>
                        <label for="floatingTextareaMefical" class="text-secondary">Medical History</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Medications" class="form-control h-100 someinput" rows="2" placeholder="Medications" id="floatingTextareaMedications"></textarea>
                        <label for="floatingTextareaMedications" class="text-secondary">Medications</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Allergies" class="form-control h-100 someinput" rows="2" placeholder="Allergies" id="floatingTextareaAllergies"></textarea>
                        <label for="floatingTextareaAllergies" class="text-secondary">Allergies</label>
                    </div>
                </div>

                <div class="col-xl-4 mt-4">
                    <div class="form-floating">
                        <input type="text" asp-for="Temperature" class="form-control someinput" id="floatingTemperature" placeholder="Temperature">
                        <label for="floatingTemperature" class="text-secondary">Temperature</label>
                    </div>
                </div>
                <div class="col-xl-4 mt-4">
                    <div class="form-floating">
                        <input type="text" asp-for="HR" class="form-control someinput" id="floatingHR" placeholder="HR">
                        <label for="floatingHR" class="text-secondary">HR (Heart Rate)</label>
                    </div>
                </div>
                <div class="col-xl-4 mt-4">
                    <div class="form-floating">
                        <input type="text" asp-for="RR" class="form-control someinput" id="floatingRR" placeholder="RR">
                        <label for="floatingRR" class="text-secondary">RR (Respiratory Rate)</label>
                    </div>
                </div>

                <div class="col-xl-4 mt-4 d-flex">
                    <div class="form-floating me-4">
                        <input type="text" asp-for="BloodPressureSystolic" class="form-control someinput" id="FloatingSystolic" placeholder="Systolic">
                        <label for="FloatingSystolic" class="text-secondary">Blood Pressure(S..)</label>
                    </div>
                    <div class="form-floating">
                        <input type="text" asp-for="BloodPressureDiastolic" class="form-control someinput" id="FloatingDiastolic" placeholder="Diastolic">
                        <label for="FloatingDiastolic" class="text-secondary">Blood Pressure(D..)</label>
                    </div>
                </div>
                <div class="col-xl-4 mt-4">
                    <div class="form-floating">
                        <input type="text" asp-for="O2" class="form-control someinput" id="floatingO2" placeholder="O2">
                        <label for="floatingO2" class="text-secondary">O2</label>
                    </div>
                </div>
                <div class="col-xl-4 mt-4">
                    <div class="form-floating">
                        <input type="text" asp-for="Pain" class="form-control someinput" id="floatingPain" placeholder="RR">
                        <label for="floatingPain" class="text-secondary">Pain</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="HEENT" class="form-control h-100 someinput" rows="2" placeholder="HEENT" id="floatingTextareaHEENT"></textarea>
                        <label for="floatingTextareaHEENT" class="text-secondary">HEENT</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="CV" class="form-control h-100 someinput" rows="2" placeholder="CV" id="floatingTextareaCV"></textarea>
                        <label for="floatingTextareaCV" class="text-secondary">CV</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Chest" class="form-control h-100 someinput" rows="2" placeholder="Chest" id="floatingTextareaChest"></textarea>
                        <label for="floatingTextareaChest" class="text-secondary">Chest</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="ABD" class="form-control h-100 someinput" rows="2" placeholder="ABD" id="floatingTextareaABD"></textarea>
                        <label for="floatingTextareaABD" class="text-secondary">ABD </label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Extr" class="form-control h-100 someinput" rows="2" placeholder="Extr" id="floatingTextareaExtr"></textarea>
                        <label for="floatingTextareaExtr" class="text-secondary">Extr</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Skin" class="form-control h-100 someinput" rows="2" placeholder="Skin" id="floatingTextareaSkin"></textarea>
                        <label for="floatingTextareaSkin" class="text-secondary">Skin</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Neuro" class="form-control h-100 someinput" rows="2" placeholder="Neuro" id="floatingTextareaNeuro"></textarea>
                        <label for="floatingTextareaNeuro" class="text-secondary">Neuro</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Other" class="form-control h-100 someinput" rows="2" placeholder="Other" id="floatingTextareaOther"></textarea>
                        <label for="floatingTextareaOther" class="text-secondary">Other</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Diagnosis" class="form-control h-100 someinput" rows="2" placeholder="Diagnosis" id="floatingTextareaDiagnosis"></textarea>
                        <label for="floatingTextareaDiagnosis" class="text-secondary">Diagnosis</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="TreatmentPlan" class="form-control h-100 someinput" rows="2" placeholder="Treatment Plan" id="floatingTextareaTreatmentPlan"></textarea>
                        <label for="floatingTextareaTreatmentPlan" class="text-secondary">Treatment Plan</label>
                    </div>
                </div>

                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="MedicationDispensed" class="form-control h-100 someinput" rows="2" placeholder="Medication dispensed" id="floatingTextareaMdispensed"></textarea>
                        <label for="floatingTextareaMdispensed" class="text-secondary">Medication dispensed</label>
                    </div>
                </div>
                <div class="col-xl-6 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="Procedures" class="form-control h-100 someinput" rows="2" placeholder="Procedures" id="floatingTextareaProcedures"></textarea>
                        <label for="floatingTextareaProcedures" class="text-secondary">Procedures</label>
                    </div>
                </div>
                <div class="col-12 mt-4">
                    <div class="form-floating">
                        <textarea asp-for="FollowUp" class="form-control h-100 someinput" rows="2" placeholder="Follow-up" id="floatingTextareaFollowUp"></textarea>
                        <label for="floatingTextareaFollowUp" class="text-secondary">Follow-up</label>
                    </div>
                </div>


                <div class="col-12 mt-5 ">
                    <div class="d-flex justify-content-end">
                        <button type="button" class="border-0 bg-transparent">
                            <a class="btn  btn-info text-white fs-5  p-2 rounded fw-semibold me-2" id="editbtn">
                                Edit
                            </a>
                        </button>
                        <button type="submit" class="border-0 bg-transparent" id="savebtn" style="display : none;">
                            <a class="btn  btn-info text-white fs-5  p-2 rounded fw-semibold me-2">
                                Save Changes
                            </a>
                        </button>

                        @if (Model.CallId == 3)
                        {
                            <button type="button" class="border-0 bg-transparent" onclick="finalizeEncounterModal(@Model.RequestId)">
                                <a class="btn  fs-5 text-white p-2 rounded fw-semibold me-2" style="background-color:#a130cf;">
                                    Finalize
                                </a>
                            </button>
                        }
                        <button type="reset" class="border-0 bg-transparent" style="display : none;">
                            <a id="cancelbtn" class="btn  btn-outline-info border border-2 border-info fs-5  p-2 rounded fw-semibold me-2">
                                Cancel
                            </a>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>



@* <script>
    const phoneInputField = document.querySelector("#phone");
    const phoneInput = window.intlTelInput(phoneInputField, {
        utilsScript:
            "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });
</script>
 *@
<script>
    $("#encounterForm input,textarea,select").prop("disabled", true);


    $('#editbtn').on('click', function (e) {
        e.preventDefault();
        $('.someinput').attr('disabled', false);
        $(this).hide();
        $('#cancelbtn').show();
        $('#savebtn').show();
    });


    // $('#savebtn').on('click', function (e) {
    //     e.preventDefault();
    //     $('.someinput').attr('disabled', true);
    //     $(this).hide();
    //     $('#editbtn').show();
    // });


   
</script>